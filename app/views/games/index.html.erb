<% content_for(:title, 'ゲーム') %>
<div class="text-center">
  <div class="position-relative text-center mb-2">
    <h3 class="mb-0">第<%= session[:game_round] %>/5問</h3>
    <p class="position-absolute top-0 end-0 mb-0 me-4">現在の得点: <strong><%= @current_score %>点</strong></p>
  </div>

  <%= image_tag @random_image.url, alt: "ゲーム画像", class: "img-fluid", style: "max-height: 65vh; object-fit: contain;" %>

  <p class="text-center text-muted mt-1">
    画像提供：<a href="https://unsplash.com/" target="_blank" rel="noopener noreferrer">Unsplash</a>
  </p>

  <%= form_with url: search_games_path, method: :get, local: true, html: { id: "search-form" } do %>
    <%= hidden_field_tag :image_id, @random_image.id %>
    <%= text_field_tag :query, params[:query], placeholder: "検索ワード", autocomplete: "off" %>
    <%= submit_tag "検索", class: "btn btn-primary continue-button" %>
  <% end %>
</div>
<div class="loading loaded" id="loading">
  <p class="loading-text">検索中...</p>
  <div class="spinner"></div>
</div>
